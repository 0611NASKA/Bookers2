<div class='container px-5 px-sm-0'>
  <div class='row'>
    <div class='col-md-3'>
      <h2>User info</h2>
      <%= render 'users/info', user: current_user %>
      <h2 class="mt-3">New book</h2>
      <%= render 'form', book: @book %>
    </div>
    <div class='col-md-8 offset-md-1'>
      <h2>Books</h2>
      <%= render 'index', books: @books %>
      <h2>7日間分の投稿数</h2>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>６日前</th>
            <th>5日前</th>
            <th>4日前</th>
            <th>3日前</th>
            <th>２日前</th>
            <th>1日前</th>
            <th>今日</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th><%= @books.created_6days.count %></th>
            <th><%= @books.created_5days.count %></th>
            <th><%= @books.created_4days.count %></th>
            <th><%= @books.created_3days.count %></th>
            <th><%= @books.created_2days.count %></th>
            <th><%= @books.created_yesterday.count %></th>
            <th><%= @books.created_today.count %></th>
          </tr>
        </tbody>
      </table>

      <canvas id="myChart" width="300" height="100"> </canvas>

      <script>
        var ctx = document.getElementById("myChart").getContext('2d');
        var myChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['6日前', '5日前', '4日前', '3日前', '2日前', '1日前', '今日'],
            datasets: [{
              label: "投稿した本の数",
              data: [<%= @books.created_6days.count %>, <%= @books.created_5days.count %>, <%= @books.created_4days.count %>, <%= @books.created_3days.count %>, <%= @books.created_2days.count %>, <%= @books.created_yesterday.count %>, <%= @books.created_today.count %>],
              backgroundColor: 'rgba(255, 255, 255, 1.0)',
              borderColor: 'rgba(0, 106, 182, 1.0)',
              lineTension: 0.3,
              fill: false
            }]
          },
        });
      </script>
    </div>
  </div>
</div>